import { useState } from "react";
import { motion } from "framer-motion";
import { Search } from "lucide-react";
import { Input } from "@/components/ui/input";
import { Button } from "@/components/ui/button";
import { ScrollArea } from "@/components/ui/scroll-area";
import { Tabs, TabsContent, TabsList, TabsTrigger } from "@/components/ui/tabs";

interface EmojiPickerProps {
  onEmojiSelect: (emoji: string) => void;
}

const emojiCategories = {
  recent: {
    name: "R√©cents",
    emojis: ["üòÄ", "üòÇ", "‚ù§Ô∏è", "üëç", "üéâ", "üî•", "üíØ", "üòç"],
  },
  people: {
    name: "Personnes",
    emojis: [
      "üòÄ",
      "üòÉ",
      "üòÑ",
      "üòÅ",
      "üòÜ",
      "üòÖ",
      "ü§£",
      "üòÇ",
      "üôÇ",
      "üôÉ",
      "üòâ",
      "üòä",
      "üòá",
      "ü•∞",
      "üòç",
      "ü§©",
      "üòò",
      "üòó",
      "üòö",
      "üòô",
      "üòã",
      "üòõ",
      "üòú",
      "ü§™",
      "üòù",
      "ü§ë",
      "ü§ó",
      "ü§≠",
      "ü§´",
      "ü§î",
      "ü§ê",
      "ü§®",
      "üòê",
      "üòë",
      "üò∂",
      "üòè",
      "üòí",
      "üôÑ",
      "üò¨",
      "ü§•",
      "üòî",
      "üò™",
      "ü§§",
      "üò¥",
      "üò∑",
      "ü§í",
      "ü§ï",
      "ü§¢",
      "ü§Æ",
      "ü§ß",
      "ü•µ",
      "ü•∂",
      "ü•¥",
      "üòµ",
      "ü§Ø",
      "ü§†",
      "ü•≥",
      "üòé",
      "ü§ì",
      "üßê",
      "üòï",
      "üòü",
      "üôÅ",
      "üòÆ",
      "üòØ",
      "üò≤",
      "üò≥",
      "ü•∫",
      "üò¶",
      "üòß",
      "üò®",
      "üò∞",
      "üò•",
      "üò¢",
      "üò≠",
      "üò±",
      "üòñ",
      "üò£",
      "üòû",
      "üòì",
      "üò©",
      "üò´",
      "ü•±",
      "üò§",
      "üò°",
      "üò†",
      "ü§¨",
      "üòà",
      "üëø",
      "üíÄ",
      "‚ò†Ô∏è",
      "üí©",
      "ü§°",
      "üëπ",
      "üë∫",
      "üëª",
      "üëΩ",
      "üëæ",
      "ü§ñ",
      "üò∫",
      "üò∏",
      "üòπ",
      "üòª",
      "üòº",
      "üòΩ",
      "üôÄ",
      "üòø",
      "üòæ",
    ],
  },
  nature: {
    name: "Nature",
    emojis: [
      "üê∂",
      "üê±",
      "üê≠",
      "üêπ",
      "üê∞",
      "ü¶ä",
      "üêª",
      "üêº",
      "üê®",
      "üêØ",
      "ü¶Å",
      "üêÆ",
      "üê∑",
      "üêΩ",
      "üê∏",
      "üêµ",
      "üôà",
      "üôâ",
      "üôä",
      "üêí",
      "üêî",
      "üêß",
      "üê¶",
      "üê§",
      "üê£",
      "üê•",
      "ü¶Ü",
      "ü¶Ö",
      "ü¶â",
      "ü¶á",
      "üê∫",
      "üêó",
      "üê¥",
      "ü¶Ñ",
      "üêù",
      "üêõ",
      "ü¶ã",
      "üêå",
      "üêû",
      "üêú",
      "ü¶ü",
      "ü¶ó",
      "üï∑Ô∏è",
      "üï∏Ô∏è",
      "ü¶Ç",
      "üê¢",
      "üêç",
      "ü¶é",
      "ü¶ñ",
      "ü¶ï",
      "üêô",
      "ü¶ë",
      "ü¶ê",
      "ü¶û",
      "ü¶Ä",
      "üê°",
      "üê†",
      "üêü",
      "üê¨",
      "üê≥",
      "üêã",
      "ü¶à",
      "üêä",
      "üêÖ",
      "üêÜ",
      "ü¶ì",
      "ü¶ç",
      "ü¶ß",
      "üêò",
      "ü¶õ",
      "ü¶è",
      "üê™",
      "üê´",
      "ü¶í",
      "ü¶ò",
      "üêÉ",
      "üêÇ",
      "üêÑ",
      "üêé",
      "üêñ",
      "üêè",
      "üêë",
      "ü¶ô",
      "üêê",
      "ü¶å",
      "üêï",
      "üê©",
      "ü¶Æ",
      "üêï‚Äçü¶∫",
      "üêà",
      "üêì",
      "ü¶É",
      "ü¶ö",
      "ü¶ú",
      "ü¶¢",
      "ü¶©",
      "üïäÔ∏è",
      "üêá",
      "ü¶ù",
      "ü¶®",
      "ü¶°",
      "ü¶¶",
      "ü¶•",
      "üêÅ",
      "üêÄ",
      "üêøÔ∏è",
      "ü¶î",
    ],
  },
  food: {
    name: "Nourriture",
    emojis: [
      "üçé",
      "üçê",
      "üçä",
      "üçã",
      "üçå",
      "üçâ",
      "üçá",
      "üçì",
      "ü´ê",
      "üçà",
      "üçí",
      "üçë",
      "ü•≠",
      "üçç",
      "ü••",
      "ü•ù",
      "üçÖ",
      "üçÜ",
      "ü•ë",
      "ü•¶",
      "ü•¨",
      "ü•í",
      "üå∂Ô∏è",
      "ü´ë",
      "üåΩ",
      "ü•ï",
      "ü´í",
      "üßÑ",
      "üßÖ",
      "ü•î",
      "üç†",
      "ü•ê",
      "ü•Ø",
      "üçû",
      "ü•ñ",
      "ü•®",
      "üßÄ",
      "ü•ö",
      "üç≥",
      "üßà",
      "ü•û",
      "üßá",
      "ü•ì",
      "ü•©",
      "üçó",
      "üçñ",
      "ü¶¥",
      "üå≠",
      "üçî",
      "üçü",
      "üçï",
      "ü´ì",
      "ü•™",
      "ü•ô",
      "üßÜ",
      "üåÆ",
      "üåØ",
      "ü´î",
      "ü•ó",
      "ü•ò",
      "ü´ï",
      "ü•´",
      "üçù",
      "üçú",
      "üç≤",
      "üçõ",
      "üç£",
      "üç±",
      "ü•ü",
      "ü¶™",
      "üç§",
      "üçô",
      "üçö",
      "üçò",
      "üç•",
      "ü•†",
      "ü•Æ",
      "üç¢",
      "üç°",
      "üçß",
      "üç®",
      "üç¶",
      "ü•ß",
      "üßÅ",
      "üç∞",
      "üéÇ",
      "üçÆ",
      "üç≠",
      "üç¨",
      "üç´",
      "üçø",
      "üç©",
      "üç™",
      "üå∞",
      "ü•ú",
      "üçØ",
    ],
  },
  activity: {
    name: "Activit√©s",
    emojis: [
      "‚öΩ",
      "üèÄ",
      "üèà",
      "‚öæ",
      "ü•é",
      "üéæ",
      "üèê",
      "üèâ",
      "ü•è",
      "üé±",
      "ü™Ä",
      "üèì",
      "üè∏",
      "üèí",
      "üèë",
      "ü•ç",
      "üèè",
      "ü•Ö",
      "‚õ≥",
      "ü™Å",
      "üèπ",
      "üé£",
      "ü§ø",
      "ü•ä",
      "ü•ã",
      "üéΩ",
      "üõπ",
      "üõ∑",
      "‚õ∏Ô∏è",
      "ü•å",
      "üéø",
      "‚õ∑Ô∏è",
      "üèÇ",
      "ü™Ç",
      "üèãÔ∏è‚Äç‚ôÄÔ∏è",
      "üèãÔ∏è",
      "ü§º‚Äç‚ôÄÔ∏è",
      "ü§º",
      "ü§∏‚Äç‚ôÄÔ∏è",
      "ü§∏",
      "‚õπÔ∏è‚Äç‚ôÄÔ∏è",
      "‚õπÔ∏è",
      "ü§∫",
      "ü§æ‚Äç‚ôÄÔ∏è",
      "ü§æ",
      "üèåÔ∏è‚Äç‚ôÄÔ∏è",
      "üèåÔ∏è",
      "üèá",
      "üßò‚Äç‚ôÄÔ∏è",
      "üßò",
      "üèÑ‚Äç‚ôÄÔ∏è",
      "üèÑ",
      "üèä‚Äç‚ôÄÔ∏è",
      "üèä",
      "ü§Ω‚Äç‚ôÄÔ∏è",
      "ü§Ω",
      "üö£‚Äç‚ôÄÔ∏è",
      "üö£",
      "üßó‚Äç‚ôÄÔ∏è",
      "üßó",
      "üöµ‚Äç‚ôÄÔ∏è",
      "üöµ",
      "üö¥‚Äç‚ôÄÔ∏è",
      "üö¥",
      "üèÜ",
      "ü•á",
      "ü•à",
      "ü•â",
      "üèÖ",
      "üéñÔ∏è",
      "üèµÔ∏è",
      "üéóÔ∏è",
    ],
  },
  travel: {
    name: "Voyages",
    emojis: [
      "üöó",
      "üöï",
      "üöô",
      "üöå",
      "üöé",
      "üèéÔ∏è",
      "üöì",
      "üöë",
      "üöí",
      "üöê",
      "üõª",
      "üöö",
      "üöõ",
      "üöú",
      "ü¶Ø",
      "ü¶Ω",
      "ü¶º",
      "üõ¥",
      "üö≤",
      "üõµ",
      "üèçÔ∏è",
      "üõ∫",
      "üö®",
      "üöî",
      "üöç",
      "üöò",
      "üöñ",
      "üö°",
      "üö†",
      "üöü",
      "üöÉ",
      "üöã",
      "üöû",
      "üöù",
      "üöÑ",
      "üöÖ",
      "üöà",
      "üöÇ",
      "üöÜ",
      "üöá",
      "üöä",
      "üöâ",
      "‚úàÔ∏è",
      "üõ´",
      "üõ¨",
      "üõ©Ô∏è",
      "üí∫",
      "üõ∞Ô∏è",
      "üöÄ",
      "üõ∏",
      "üöÅ",
      "üõ∂",
      "‚õµ",
      "üö§",
      "üõ•Ô∏è",
      "üõ≥Ô∏è",
      "‚õ¥Ô∏è",
      "üö¢",
      "‚öì",
      "‚õΩ",
      "üöß",
      "üö¶",
      "üö•",
      "üöè",
      "üó∫Ô∏è",
      "üóø",
      "üóΩ",
      "üóº",
      "üè∞",
      "üèØ",
      "üèüÔ∏è",
      "üé°",
      "üé¢",
      "üé†",
      "‚õ±Ô∏è",
      "üèñÔ∏è",
      "üèùÔ∏è",
      "üèúÔ∏è",
      "üåã",
      "‚õ∞Ô∏è",
      "üèîÔ∏è",
      "üóª",
      "üèïÔ∏è",
      "‚õ∫",
      "üè†",
      "üè°",
      "üèòÔ∏è",
      "üèöÔ∏è",
      "üèóÔ∏è",
      "üè≠",
      "üè¢",
      "üè¨",
      "üè£",
      "üè§",
      "üè•",
      "üè¶",
      "üè®",
      "üè™",
      "üè´",
      "üè©",
      "üíí",
      "üèõÔ∏è",
      "‚õ™",
      "üïå",
      "üïç",
      "üõï",
      "üïã",
    ],
  },
  objects: {
    name: "Objets",
    emojis: [
      "‚åö",
      "üì±",
      "üì≤",
      "üíª",
      "‚å®Ô∏è",
      "üñ•Ô∏è",
      "üñ®Ô∏è",
      "üñ±Ô∏è",
      "üñ≤Ô∏è",
      "üïπÔ∏è",
      "üóúÔ∏è",
      "üíΩ",
      "üíæ",
      "üíø",
      "üìÄ",
      "üìº",
      "üì∑",
      "üì∏",
      "üìπ",
      "üé•",
      "üìΩÔ∏è",
      "üéûÔ∏è",
      "üìû",
      "‚òéÔ∏è",
      "üìü",
      "üì†",
      "üì∫",
      "üìª",
      "üéôÔ∏è",
      "üéöÔ∏è",
      "üéõÔ∏è",
      "üß≠",
      "‚è±Ô∏è",
      "‚è≤Ô∏è",
      "‚è∞",
      "üï∞Ô∏è",
      "‚åõ",
      "‚è≥",
      "üì°",
      "üîã",
      "üîå",
      "üí°",
      "üî¶",
      "üïØÔ∏è",
      "ü™î",
      "üßØ",
      "üõ¢Ô∏è",
      "üí∏",
      "üíµ",
      "üí¥",
      "üí∂",
      "üí∑",
      "ü™ô",
      "üí∞",
      "üí≥",
      "üíé",
      "‚öñÔ∏è",
      "ü™ú",
      "üß∞",
      "üîß",
      "üî®",
      "‚öíÔ∏è",
      "üõ†Ô∏è",
      "‚õèÔ∏è",
      "üî©",
      "‚öôÔ∏è",
      "ü™ö",
      "üî´",
      "üß≤",
      "‚öóÔ∏è",
      "üß™",
      "üß´",
      "üß¨",
      "üî¨",
      "üî≠",
      "üìè",
      "üìê",
      "üìå",
      "üìç",
      "üìé",
      "üñáÔ∏è",
      "üìè",
      "üìê",
      "‚úÇÔ∏è",
      "üóÉÔ∏è",
      "üóÑÔ∏è",
      "üóëÔ∏è",
      "üîí",
      "üîì",
      "üîè",
      "üîê",
      "üîë",
      "üóùÔ∏è",
      "üî®",
      "ü™ì",
      "‚õèÔ∏è",
      "‚öíÔ∏è",
      "üõ†Ô∏è",
      "üó°Ô∏è",
      "‚öîÔ∏è",
      "üî´",
      "ü™É",
      "üèπ",
      "üõ°Ô∏è",
      "ü™ö",
      "üîß",
      "ü™õ",
      "üî©",
      "‚öôÔ∏è",
      "üóúÔ∏è",
      "‚öñÔ∏è",
      "ü¶Ø",
      "üîó",
      "‚õìÔ∏è",
      "ü™ù",
      "üß∞",
      "üß≤",
      "ü™ú",
      "üõó",
      "üö™",
    ],
  },
  symbols: {
    name: "Symboles",
    emojis: [
      "‚ù§Ô∏è",
      "üß°",
      "üíõ",
      "üíö",
      "üíô",
      "üíú",
      "üñ§",
      "ü§ç",
      "ü§é",
      "üíî",
      "‚ù£Ô∏è",
      "üíï",
      "üíû",
      "üíì",
      "üíó",
      "üíñ",
      "üíò",
      "ÔøΩÔøΩ",
      "üíü",
      "‚òÆÔ∏è",
      "‚úùÔ∏è",
      "‚ò™Ô∏è",
      "üïâÔ∏è",
      "‚ò∏Ô∏è",
      "‚ú°Ô∏è",
      "üîØ",
      "üïé",
      "‚òØÔ∏è",
      "‚ò¶Ô∏è",
      "üõê",
      "‚õé",
      "‚ôà",
      "‚ôâ",
      "‚ôä",
      "‚ôã",
      "‚ôå",
      "‚ôç",
      "‚ôé",
      "‚ôè",
      "‚ôê",
      "‚ôë",
      "‚ôí",
      "‚ôì",
      "üÜî",
      "‚öõÔ∏è",
      "üâë",
      "‚ò¢Ô∏è",
      "‚ò£Ô∏è",
      "üì¥",
      "üì≥",
      "üà∂",
      "üàö",
      "üà∏",
      "üà∫",
      "üà∑Ô∏è",
      "‚ú¥Ô∏è",
      "üÜö",
      "üíÆ",
      "üâê",
      "„äôÔ∏è",
      "„äóÔ∏è",
      "üà¥",
      "üàµ",
      "üàπ",
      "üà≤",
      "üÖ∞Ô∏è",
      "üÖ±Ô∏è",
      "üÜé",
      "üÜë",
      "üÖæÔ∏è",
      "üÜò",
      "‚ùå",
      "‚≠ï",
      "üõë",
      "‚õî",
      "üìõ",
      "üö´",
      "üíØ",
      "üí¢",
      "‚ô®Ô∏è",
      "üö∑",
      "üöØ",
      "üö≥",
      "üö±",
      "üîû",
      "üìµ",
      "üö≠",
      "‚ùó",
      "‚ùï",
      "‚ùì",
      "‚ùî",
      "‚ÄºÔ∏è",
      "‚ÅâÔ∏è",
      "üîÖ",
      "üîÜ",
      "„ÄΩÔ∏è",
      "‚ö†Ô∏è",
      "üö∏",
      "üî±",
      "‚öúÔ∏è",
      "üî∞",
      "‚ôªÔ∏è",
      "‚úÖ",
      "üàØ",
      "üíπ",
      "‚ùáÔ∏è",
      "‚ú≥Ô∏è",
      "‚ùé",
      "üåê",
      "üí†",
      "‚ìÇÔ∏è",
      "üåÄ",
      "üí§",
      "üèß",
      "üöæ",
      "‚ôø",
      "üÖøÔ∏è",
      "üà≥",
      "üàÇÔ∏è",
      "üõÇ",
      "üõÉ",
      "üõÑ",
      "üõÖ",
      "üöπ",
      "üö∫",
      "üöº",
      "‚ößÔ∏è",
      "üöª",
      "üöÆ",
      "üé¶",
      "üì∂",
      "üàÅ",
      "üî£",
      "‚ÑπÔ∏è",
      "üî§",
      "üî°",
      "üî†",
      "üÜñ",
      "üÜó",
      "üÜô",
      "üÜí",
      "üÜï",
      "üÜì",
      "0Ô∏è‚É£",
      "1Ô∏è‚É£",
      "2Ô∏è‚É£",
      "3Ô∏è‚É£",
      "4Ô∏è‚É£",
      "5Ô∏è‚É£",
      "6Ô∏è‚É£",
      "7Ô∏è‚É£",
      "8Ô∏è‚É£",
      "9Ô∏è‚É£",
      "üîü",
    ],
  },
  flags: {
    name: "Drapeaux",
    emojis: [
      "üèÅ",
      "üö©",
      "üéå",
      "üè¥",
      "üè≥Ô∏è",
      "üè≥Ô∏è‚Äçüåà",
      "üè≥Ô∏è‚Äç‚ößÔ∏è",
      "üè¥‚Äç‚ò†Ô∏è",
      "üá¶üá®",
      "üá¶üá©",
      "üá¶üá™",
      "üá¶üá´",
      "üá¶üá¨",
      "üá¶üáÆ",
      "üá¶üá±",
      "üá¶üá≤",
      "üá¶üá¥",
      "üá¶üá∂",
      "üá¶üá∑",
      "üá¶üá∏",
      "üá¶üáπ",
      "üá¶üá∫",
      "üá¶üáº",
      "üá¶üáΩ",
      "üá¶üáø",
      "üáßüá¶",
      "üáßüáß",
      "üáßüá©",
      "üáßüá™",
      "üáßüá´",
      "üáßüá¨",
      "üáßüá≠",
      "üáßüáÆ",
      "üáßüáØ",
      "üáßüá±",
      "üáßüá≤",
      "üáßüá≥",
      "üáßüá¥",
      "üáßüá∂",
      "üáßüá∑",
      "üáßüá∏",
      "üáßüáπ",
      "üáßüáª",
      "üáßüáº",
      "üáßüáæ",
      "üáßüáø",
      "üá®üá¶",
      "üá®üá®",
      "üá®üá©",
      "üá®üá´",
      "üá®üá¨",
      "üá®üá≠",
      "üá®üáÆ",
      "üá®üá∞",
      "üá®üá±",
      "üá®üá≤",
      "üá®üá≥",
      "üá®üá¥",
      "üá®üáµ",
      "üá®üá∑",
      "üá®üá∫",
      "üá®üáª",
      "üá®üáº",
      "üá®üáΩ",
      "üá®üáæ",
      "üá®üáø",
      "üá©üá™",
      "üá©üá¨",
      "üá©üáØ",
      "üá©üá∞",
      "üá©üá≤",
      "üá©üá¥",
      "üá©üáø",
      "üá™üá¶",
      "üá™üá®",
      "üá™üá™",
      "üá™üá¨",
      "üá™ÔøΩÔøΩ",
      "üá™üá∑",
      "üá™üá∏",
      "üá™üáπ",
      "üá™üá∫",
      "üá´üáÆ",
      "üá´üáØ",
      "üá´üá∞",
      "üá´üá≤",
      "üá´üá¥",
      "üá´üá∑",
    ],
  },
};

export function EmojiPicker({ onEmojiSelect }: EmojiPickerProps) {
  const [searchTerm, setSearchTerm] = useState("");
  const [activeCategory, setActiveCategory] = useState("recent");

  const filteredEmojis = searchTerm
    ? Object.values(emojiCategories)
        .flatMap((category) => category.emojis)
        .filter((emoji) => emoji.includes(searchTerm))
    : emojiCategories[activeCategory as keyof typeof emojiCategories]?.emojis ||
      [];

  return (
    <div className="w-80 h-80 flex flex-col">
      {/* Barre de recherche */}
      <div className="p-3 border-b">
        <div className="relative">
          <Search className="absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-muted-foreground" />
          <Input
            placeholder="Rechercher un emoji..."
            value={searchTerm}
            onChange={(e) => setSearchTerm(e.target.value)}
            className="pl-9 h-8"
          />
        </div>
      </div>

      {!searchTerm && (
        <Tabs
          value={activeCategory}
          onValueChange={setActiveCategory}
          className="flex-1 flex flex-col"
        >
          {/* Onglets des cat√©gories */}
          <TabsList className="grid grid-cols-4 gap-1 p-2 h-auto">
            {Object.entries(emojiCategories)
              .slice(0, 8)
              .map(([key, category]) => (
                <TabsTrigger
                  key={key}
                  value={key}
                  className="p-2 text-xs h-auto"
                >
                  {category.name}
                </TabsTrigger>
              ))}
          </TabsList>

          <div className="flex-1">
            {Object.entries(emojiCategories).map(([key, category]) => (
              <TabsContent key={key} value={key} className="h-full m-0">
                <ScrollArea className="h-full">
                  <div className="grid grid-cols-8 gap-1 p-2">
                    {category.emojis.map((emoji, index) => (
                      <motion.button
                        key={index}
                        whileHover={{ scale: 1.2 }}
                        whileTap={{ scale: 0.9 }}
                        className="w-8 h-8 flex items-center justify-center text-lg hover:bg-muted rounded transition-colors"
                        onClick={() => onEmojiSelect(emoji)}
                      >
                        {emoji}
                      </motion.button>
                    ))}
                  </div>
                </ScrollArea>
              </TabsContent>
            ))}
          </div>
        </Tabs>
      )}

      {searchTerm && (
        <ScrollArea className="flex-1">
          <div className="grid grid-cols-8 gap-1 p-2">
            {filteredEmojis.map((emoji, index) => (
              <motion.button
                key={index}
                whileHover={{ scale: 1.2 }}
                whileTap={{ scale: 0.9 }}
                className="w-8 h-8 flex items-center justify-center text-lg hover:bg-muted rounded transition-colors"
                onClick={() => onEmojiSelect(emoji)}
              >
                {emoji}
              </motion.button>
            ))}
          </div>
          {filteredEmojis.length === 0 && (
            <div className="text-center py-8 text-muted-foreground">
              <p className="text-sm">Aucun emoji trouv√©</p>
            </div>
          )}
        </ScrollArea>
      )}
    </div>
  );
}
